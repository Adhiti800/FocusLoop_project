{% extends "base.html" %}
{% block content %}
{% load static %}
<script src="{% static 'dashboard/js/b_script.js' %}"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    body {
        background: #FFFFFF;
        font-family: 'Poppins', sans-serif;
        animation: gradientShift 10s ease infinite;
        transition: opacity 0.5s ease;
        /*background-size: 800% 800%;*/
    }

    body.fade-out {
        opacity: 0;
    }

    @keyframes gradientShift {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .navbar-pink a {
        color: white;
        text-decoration: none;
        padding: 10px 15px;
        margin: 5px 0;
        border-radius: 4px;
        transition: all 0.3s ease;
        margin: 10px 0;

    }

    .navbar-pink a:hover {
        background-color: #8746d5;
        color: #FFFFFF;
        box-shadow: 0 5px 15px rgba(173, 72, 255, 0.4), 0 0 25px #8236de, 0 0 50px #8236de;
        transform: translateY(-3px) scale(1.05);
        padding: 5px 15px;
        margin: 5px 0;

        margin: 10px 0;


    }

    .btn-pink {
        background-color: #FF8FB1;
        color: white;
        font-weight: 600;
        padding: 12px 28px;
        border-radius: 50px;
        border: none;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(255, 143, 177, 0.4);
        margin: 10px 0;
        width: 100%;
    }

    .btn-pink:hover {
        background-color: #FF4C82;
        color: #FFFFFF;
        box-shadow: 0 0 25px #FF4C82, 0 0 50px #c978ff;
        transform: translateY(-3px) scale(1.05);
    }

    .navbar-pink {
        background-color: #8236de;
        color: white;
    }

    .form-control {
        border-radius: 10px;
        padding: 5px;
        width: 95%;
        margin: 10px 10px;
        border-bottom: #8236de 2px solid;

    }

    .form-control:focus {
        box-shadow: 0 0 5px #8236de;
        border: 1px solid #8236de;
    }

    .form-label {
        font-weight: bold;
        font-size: 16px;

    }

    .leave-form {
        margin: auto;
        padding: 20px;
        border-radius: 10px;
        border: #8236de 2px solid;

    }

    .card {
        padding: 20px;
        margin: 15px;
    }
</style>

<div class="d-flex">
    <div class="flex-grow-1 p-4">
        <!--Nav bar no Hajimari-->
        <nav class="navbar navbar-pink mb-4 rounded">
            <div class="container-fluid">

                <a href="#" style="font-weight: bold;">Student : {{student.student_name}}</a>
                <a href="{% url 'dashboard:student_home' %}">Home</a>
                <a href="{% url 'dashboard:student_leave' %}">Leave Applications</a>

                <form method="POST" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Logout</button>
                </form>
            </div>
        </nav>
        <!--Nav Bar no Owari-->

        <!--Main part no Hajimari-->
        <h2 style="font-weight: bold;"> Submit a Complaint</h2>
        <p style="font-size: 18px;"> Feel free to share your problems! ;
        <p>

        <div class="row mt-4">
            <div class="col-md-6 mb-3">
                <div class="card">

                    <!--Form no Hajimari-->
                    <form method="POST" class="leave-form">
                        {% csrf_token %}
                        <h3>New Complaint</h3>
                        <p>please fill out the form below!</p>
                        <div class="mb-3 text-start">
                            <label class="form-label">Complaint Title</label>
                            <input type="text" class="form-control" name="complaint_title"
                                placeholder="Brief title of your complaints" required>
                        </div>

                        <div class="mb-3 text-start">
                            <label class="form-label">Category</label>
                            <input type="text" class="form-control" name="complaint_category"
                                placeholder="e.g: Academic" required>
                        </div>

                        <div class="mb-4 text-start">
                            <label class="form-label">Description</label>
                            <textarea id="complaint_detail" name="complaint_detail" rows="6" cols="50"
                                class="form-control" placeholder="Enter your reason here!" required></textarea>
                        </div>

                        <div class="mb-4 text-start justify-content-center">
                            <label style=" font-weight: bold; "> Submit Anonymous Complaint?</label>
                            <p style="font-size:16px"> Your Identity will not be revealed!</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="anonymousSwitch" name="anonymous">
                                <label class="form-check-label" for="anonymousSwitch">Submit anonymously</label>
                            </div>


                        </div>
                        <button type="submit" class="btn btn-pink">Submit Complaint</button>
                    </form>
                    <!--Form no Owari-->

                </div>
            </div>


            <div class="col-md-8 mb-3">
                <div class="card p-4">

                    <h3>Your Complaint History</h3>

                    <div class="card">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Complaint Title</th>
                                    <th scope="col">Category</th>
                                    <th scope="col">Description</th>
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for complaint in complaints %}
                                <tr>
                                  
                                    <td>{{ complaint.complaint_title }}</td>
                                    <td>{{ complaint.complaint_category }}</td>
                                    <td>{{ complaint.complaint_detail}}</td>
                                    <td>{{ complaint.status }}</td>
                                </tr>

                                {% empty %}
                                <tr>
                                    <td colspan="5">No Complaints found.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Main part no Owari-->
</div>
{% endblock %}